# Дашборд для всех сотрудников (доступ по ссылке в любое время)

**Пошаговая инструкция «как для начинающего»:** [КАК_ВЫЛОЖИТЬ_ДАШБОРД_ПОШАГОВО.md](КАК_ВЫЛОЖИТЬ_ДАШБОРД_ПОШАГОВО.md)

Чтобы любой сотрудник мог открыть дашборд по ссылке в браузере, не завися от тебя и не запуская ничего на своём компьютере, нужно **один раз выложить дашборд в интернет**.

Проще всего — бесплатный **Streamlit Community Cloud**. После настройки ты даёшь коллегам одну ссылку, они открывают её в браузере и видят данные.

---

## Что нужно один раз сделать

1. Выложить код проекта в **GitHub** (без файла `service_account.json` — он не должен попадать в репозиторий).
2. Зарегистрироваться на **share.streamlit.io** (бесплатно, через Google/GitHub).
3. Подключить репозиторий и указать путь к приложению.
4. Добавить **секрет** с содержимым ключа Google (JSON сервисного аккаунта).
5. Раздать сотрудникам **ссылку** на приложение.

Дальше дашборд работает 24/7. Любой, у кого есть ссылка, может открыть его в любое время.

---

## По шагам

### Шаг 1. Репозиторий на GitHub

1. Создай репозиторий на [github.com](https://github.com) (приватный или публичный).
2. Залей туда проект `anchor_checker` (через Git или загрузку файлов).
3. Убедись, что **`service_account.json` не попадает в репозиторий** (он должен быть в `.gitignore` — в проекте уже так настроено).

### Шаг 2. Streamlit Community Cloud

1. Открой [share.streamlit.io](https://share.streamlit.io) и войди (Google или GitHub).
2. Нажми **«New app»**.
3. **Repository:** выбери свой репозиторий (например, `твой-логин/anchor_checker`).
4. **Branch:** `main` (или та ветка, где лежит код).
5. **Main file path:** укажи **`app/dashboard/app.py`**.
6. Нажми **«Deploy»**. Первый запуск может занять 1–2 минуты.

### Шаг 3. Секрет с ключом Google

Чтобы приложение в облаке могло читать таблицы, нужно передать ему ключ сервисного аккаунта **через секреты**, а не через файл в репозитории.

1. В Streamlit Cloud открой своё приложение и перейди в **Settings** (значок шестерёнки) → **Secrets**.
2. Вставь в поле секретов **одну строку** в формате TOML:
   ```toml
   service_account_json = '''
   {"type": "service_account", "project_id": "...", "private_key_id": "...", "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n", "client_email": "...", "client_id": "...", ...}
   '''
   ```
   Вместо `...` — **полное содержимое** твоего файла `service_account.json` (скопируй целиком из файла, включая кавычки и `\n` в `private_key`). Можно в одну строку или оставить переносы внутри тройных кавычек `''' ... '''`.
3. Сохрани (**Save**). Приложение перезапустится и подхватит секрет.

Если таблицы уже расшарены на `client_email` из этого ключа (как в [ПО_ШАГАМ.md](ПО_ШАГАМ.md)), данные на дашборде появятся сами.

### Шаг 4. Ссылка для сотрудников

После успешного деплоя Streamlit покажет ссылку вида:
**`https://твой-репо-anchor-checker-....streamlit.app`**

Эту ссылку можно:
- отправить в чат/почту команде;
- положить в закладки или внутреннюю базу знаний.

Кто открывает ссылку — видит дашборд. Ничего устанавливать и запускать не нужно. Доступ только на чтение данных из таблиц, таблицы приложение не меняет.

---

## Важно

- **Секрет** (`service_account_json`) хранится только в Streamlit Cloud и не попадает в Git. Не коммить `service_account.json` в репозиторий.
- Четыре таблицы по-прежнему должны быть расшарены на **email сервисного аккаунта** (из этого же JSON) с правом **«Читатель»** — как в [ПО_ШАГАМ.md](ПО_ШАГАМ.md).
- Бесплатный Streamlit Cloud может «засыпать» при отсутствии обращений; первое открытие после паузы может занять несколько секунд.

Если захочешь ограничить доступ только своими сотрудниками (по логину), это можно сделать отдельно (например, через прокси с авторизацией или платные возможности Streamlit).

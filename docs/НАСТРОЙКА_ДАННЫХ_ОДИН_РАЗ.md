# Как сделать, чтобы дашборд открывался с данными сразу («зашёл и готово»)

Один раз настраиваешь доступ к Google Таблицам — потом просто открываешь дашборд и сразу видишь, кто сколько ссылок разместил.

---

## Что нужно сделать один раз

1. Создать сервисный аккаунт в Google Cloud и скачать ключ (JSON).
2. Положить файл `service_account.json` в папку `c:\project\anchor_checker\`.
3. Дать этому аккаунту доступ на чтение к четырём таблицам (по одной кнопке «Поделиться» в каждой).

После этого при каждом запуске дашборда данные будут подгружаться сами.

---

## Шаг 1. Создать сервисный аккаунт и скачать JSON

1. Открой [Google Cloud Console](https://console.cloud.google.com/) и выбери тот же проект, где у тебя уже настроен OAuth (например, «Dashboard META»).
2. В левом меню: **APIs & Services** → **Credentials** (Учётные данные).
3. Вверху нажми **+ Create Credentials** → **Service account** (Сервисный аккаунт).
4. **Service account name:** например, `dashboard-reader`. Нажми **Create and Continue**.
5. Роль можно не менять (или выбрать «Viewer»). Нажми **Done**.
6. В списке сервисных аккаунтов кликни по только что созданному (например, `dashboard-reader`).
7. Перейди на вкладку **Keys** (Ключи).
8. **Add Key** → **Create new key** → выбери **JSON** → **Create**. Файл скачается.
9. Переименуй скачанный файл в **`service_account.json`**.
10. Перемести его в папку проекта: **`c:\project\anchor_checker\`** (рядом с `run_dashboard.py` и папкой `app`).

---

## Шаг 2. Узнать email сервисного аккаунта

1. Открой файл `service_account.json` в блокноте.
2. Найди строку **`"client_email"`**. Там будет что-то вроде:  
   `dashboard-reader@твой-проект.iam.gserviceaccount.com`
3. Скопируй этот email — он понадобится на следующем шаге.

---

## Шаг 3. Дать доступ к четырём таблицам

Нужно в каждой из четырёх таблиц нажать «Поделиться» и добавить **скопированный email** сервисного аккаунта с правом **«Читатель»**.

| № | Таблица | Ссылка |
|---|--------|--------|
| 1 | [ВНУТРЕННИЙ] MR Anchors (лист «СНГ Outreach») | https://docs.google.com/spreadsheets/d/1DaiRFqU2d_85cXr0fDmyhzIY4V9fm0zxh4KraZMOFnw/edit |
| 2 | [ВНУТРЕННИЙ] Основная РФ и СНГ (лист «Размещенные ссылки») | https://docs.google.com/spreadsheets/d/1v_cheF0k0UCl9CniUWu-pTTYbl0CIOjE0BH0rzW3HXE/edit |
| 3 | [ВНУТРЕННИЙ] TelecomAsia Anchors (лист «Outreach») | https://docs.google.com/spreadsheets/d/1S5lk-ya4iWwq5znY_vebAuTqloyTlWTcsNuXydZXT00/edit |
| 4 | [ВНУТРЕННИЙ] International (лист «Posted links») | https://docs.google.com/spreadsheets/d/1yj3eWqTpjxZFU0e9yg5A6TIh79N-s9g1Zmz3U-Q_54E/edit |

В каждой таблице:

1. Нажми **«Поделиться»** (справа вверху).
2. В поле «Добавить пользователей» вставь **email из `service_account.json`** (из шага 2).
3. Права оставь **«Читатель»**.
4. Сними галочку «Уведомить пользователей», если не хочешь отправлять письмо (аккаунт всё равно не читает почту).
5. Нажми **«Готово»** или **«Поделиться»**.

Повтори для всех четырёх таблиц.

---

## Готово

Теперь:

1. Запусти дашборд: в PowerShell из `c:\project\anchor_checker` введи **`python run_dashboard.py`**.
2. Открой в браузере **http://localhost:8501** (или порт, который покажет терминал).
3. Данные подгрузятся сами — сразу будет видно **кто и сколько разместил** за выбранный период (неделя/месяц/свой диапазон).

Файл `service_account.json` в Git не коммить и никому не отправлять — это ключ доступа к таблицам.

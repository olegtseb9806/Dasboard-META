# Дашборд: что уже сделано и что нужно сделать тебе

---

## Что уже сделано (тебе это делать не нужно)

- **Дашборд** — готов. Показывает, кто сколько ссылок разместил, по каким проектам, за выбранный период (неделя, месяц или свой диапазон).
- **Подключение к твоим 4 таблицам** — в коде уже прописаны все четыре таблицы и нужные листы. Дашборд только **читает** данные, ничего в таблицах не меняет.
- **Скрипт запуска** — `run_dashboard.py`: один раз настроишь данные — потом просто запускаешь его, и дашборд открывается.
- **Скрипт для email** — `show_share_email.py`: покажет email, который нужно добавить в «Поделиться» в таблицах, и ссылки на все 4 таблицы.
- **Поддержка облака** — если захочешь, чтобы дашборд был по ссылке в интернете для всех сотрудников, код уже умеет работать с секретами (инструкция в ДАШБОРД_ДЛЯ_ВСЕХ.md).

**Тебе остаётся только:** один раз выдать доступ к таблицам (ключ + «Поделиться») и при необходимости запускать дашборд. Ниже — только твои шаги, максимально подробно.

---

# Твои шаги (подробно, как для начинающего)

Делай по порядку. Не пропускай шаги.

---

## Блок 1. Открыть дашборд на своём компьютере

### Шаг 1.1. Открыть PowerShell

1. Нажми на клавиатуре клавишу **Windows** (значок окошка внизу слева) **или** левой кнопкой мыши по кнопке **«Пуск»** в левом нижнем углу экрана.
2. Начни печатать латинскими буквами: **PowerShell** (без кавычек).
3. В списке появится что-то вроде **«Windows PowerShell»** или **«PowerShell»**. Нажми на это **один раз** левой кнопкой мыши.
4. Откроется окно (синее или чёрное) с текстом вроде:
   ```
   PS C:\Users\Алежа>
   ```
   Внизу мигает курсор — это место, куда вводятся команды. **Это окно не закрывай**, пока работаешь с дашбордом.

**Если PowerShell не нашёлся:** в «Пуске» введи **cmd** и нажми Enter — откроется командная строка. Дальше те же команды вводи в неё (вместо PowerShell).

---

### Шаг 1.2. Перейти в папку проекта

1. В окне PowerShell **один раз кликни** мышкой, чтобы курсор был в этом окне.
2. Введи **ровно** эту строку (можно скопировать и вставить):
   ```
   cd c:\project\anchor_checker
   ```
   Пробел после `cd` обязателен. Кавычки не нужны.
3. Нажми клавишу **Enter** на клавиатуре.
4. Строка внизу должна измениться и стать такой:
   ```
   PS c:\project\anchor_checker>
   ```
   Значит, ты «зашёл» в папку с дашбордом. Если вместо этого красный текст с ошибкой — проверь, что путь написан без опечаток и с пробелом после `cd`.

---

### Шаг 1.3. Установить нужные программы (один раз)

1. В той же строке, где мигает курсор, введи:
   ```
   python -m pip install -r requirements.txt
   ```
   (Пробелы важны: после `python`, после `-m`, после `pip`, после `install`, после `-r`.)
2. Нажми **Enter**.
3. Появится много текста — компьютер скачивает и ставит библиотеки. Подожди, пока внизу снова не появится строка вида:
   ```
   PS c:\project\anchor_checker>
   ```
   Тогда шаг выполнен.

**Если написало «python не найден» или «не распознано»:** значит, Python не установлен или не добавлен в путь. Нужно установить Python с сайта https://www.python.org/downloads/ и при установке **обязательно отметить галочку «Add Python to PATH»**, потом снова открыть PowerShell и повторить этот шаг.

---

### Шаг 1.4. Запустить дашборд

1. В той же папке введи:
   ```
   python run_dashboard.py
   ```
2. Нажми **Enter**.
3. Появится текст. Найди строку, где написано что-то вроде:
   ```
   Local URL: http://localhost:8501
   ```
   (Цифра в конце может быть другая, например 8502 — это нормально.)
4. **Окно PowerShell не закрывай.** Оставь его открытым.

---

### Шаг 1.5. Открыть дашборд в браузере

1. Открой браузер (Chrome, Edge, Firefox — любой).
2. В **адресной строке** (где обычно пишут google.com) введи:
   ```
   http://localhost:8501
   ```
   Если в PowerShell была цифра 8502 — введи **http://localhost:8502**.
3. Нажми **Enter**.
4. Должна открыться страница с заголовком про «Дашборд: размещения ссылок» и фильтрами. Это и есть дашборд.

Если на странице написано «Нет данных» или про `service_account.json` — переходи к **Блоку 2** (настроить доступ к таблицам). Если данные уже есть — на этом всё, можешь пользоваться.

---

## Блок 2. Один раз дать дашборду доступ к таблицам (чтобы сразу видеть «кто сколько сделал»)

Дашборд будет **только читать** таблицы. Ничего в них не изменится. Нужно только один раз создать «ключ» и в каждой таблице нажать «Поделиться», добавив этот ключ с правом **«Читатель»**.

---

### Шаг 2.1. Открыть страницу учётных данных в Google

1. Открой браузер и в адресной строке введи:
   ```
   https://console.cloud.google.com/apis/credentials
   ```
   Нажми **Enter**.
2. Если попросит войти в Google — войди тем аккаунтом, у которого есть доступ к твоим 4 таблицам.
3. Вверху страницы есть выпадающий список с названием проекта (например, «Dashboard META» или «My Project»). Убедись, что выбран **нужный проект** — тот, с которым ты работаешь. Если нужно, выбери его из списка.

---

### Шаг 2.2. Создать сервисный аккаунт

1. На странице найди синюю кнопку **«+ Create Credentials»** (или «Создать учётные данные») и нажми на неё.
2. В выпадающем списке выбери **«Service account»** (Сервисный аккаунт).
3. Откроется форма. В поле **«Service account name»** введи любое короткое имя, например: **dashboard**. Остальные поля можно не трогать.
4. Внизу нажми **«Create and Continue»** (Создать и продолжить).
5. На следующем экране можно ничего не менять. Нажми **«Done»** (Готово).
6. Ты вернёшься на список. В нём появилась новая строка — твой сервисный аккаунт (с именем, которое ты ввёл, например **dashboard**). **Кликни по этой строке** (по имени или по email в ней).

---

### Шаг 2.3. Скачать ключ (JSON-файл)

1. Вверху открывшейся страницы есть вкладки. Найди вкладку **«Keys»** (Ключи) и нажми на неё.
2. Нажми кнопку **«Add Key»** (Добавить ключ) → выбери **«Create new key»** (Создать новый ключ).
3. Откроется окно «Create key». Выбери тип **«JSON»** (точка должна стоять именно у JSON). Нажми **«Create»** (Создать).
4. Файл автоматически скачается на компьютер (обычно в папку «Загрузки»). Название будет длинным, вроде `проект-название-123456-abcdef.json`. Это нормально.

---

### Шаг 2.4. Переименовать файл и положить в папку проекта

1. Открой папку **«Загрузки»** (Downloads) на своём компьютере и найди только что скачанный файл (имя заканчивается на `.json`, дата — сегодняшняя).
2. **Переименуй** этот файл: правой кнопкой мыши по файлу → **«Переименовать»**. Удали всё имя и введи **ровно**: **service_account.json** (без пробелов, с подчёркиванием и точкой). Нажми Enter.
3. **Вырежи** этот файл (правой кнопкой → «Вырезать») или скопируй («Копировать»).
4. Открой папку **c:\project\anchor_checker** на диске (то есть папку, где у тебя лежит проект с дашбордом). В ней должны быть файлы `run_dashboard.py`, папка `app` и т.д.
5. **Вставь** сюда файл **service_account.json** (правой кнопкой по пустому месту → «Вставить»). В итоге в папке `c:\project\anchor_checker` должен лежать файл с именем **service_account.json**.

---

### Шаг 2.5. Узнать email, который нужно добавить в «Поделиться»

1. Вернись в окно **PowerShell**, где ты уже был в папке `c:\project\anchor_checker` (если закрыл — снова открой PowerShell, введи `cd c:\project\anchor_checker` и Enter).
2. Введи команду:
   ```
   python show_share_email.py
   ```
   Нажми **Enter**.
3. В окне появится длинный email вида `что-то@название-проекта.iam.gserviceaccount.com` и под ним ссылки на 4 таблицы.
4. **Выдели мышкой** этот email (от начала до конца) и **скопируй** его (правой кнопкой → «Копировать» или Ctrl+C). Он понадобится в следующих шагах.

---

### Шаг 2.6. Добавить этот email в «Поделиться» в первой таблице

1. Открой в браузере **первую** ссылку (она была в выводе `show_share_email.py` или вот она):
   ```
   https://docs.google.com/spreadsheets/d/1DaiRFqU2d_85cXr0fDmyhzIY4V9fm0zxh4KraZMOFnw/edit
   ```
2. Откроется Google Таблица. Справа вверху есть зелёная кнопка **«Поделиться»** (или «Share») — нажми на неё.
3. В открывшемся окне есть поле «Добавить пользователей» или «Add people». **Вставь** туда скопированный email (Ctrl+V или правой кнопкой → Вставить).
4. Рядом с полем выбери уровень доступа: **«Читатель»** (Viewer). Не выбирай «Редактор» — дашборду достаточно только чтения.
5. Можно снять галочку «Уведомить» (Notify), чтобы не отправлять письмо — сервисный аккаунт его не прочитает.
6. Нажми **«Готово»** или **«Share»** / **«Поделиться»**. Окно закроется.

---

### Шаг 2.7. То же самое для второй таблицы

1. Открой **вторую** таблицу:
   ```
   https://docs.google.com/spreadsheets/d/1v_cheF0k0UCl9CniUWu-pTTYbl0CIOjE0BH0rzW3HXE/edit
   ```
2. Нажми **«Поделиться»** → вставь **тот же** email → выбери **«Читатель»** → **Готово**.

---

### Шаг 2.8. То же самое для третьей таблицы

1. Открой **третью** таблицу:
   ```
   https://docs.google.com/spreadsheets/d/1S5lk-ya4iWwq5znY_vebAuTqloyTlWTcsNuXydZXT00/edit
   ```
2. **«Поделиться»** → вставь **тот же** email → **«Читатель»** → **Готово**.

---

### Шаг 2.9. То же самое для четвёртой таблицы

1. Открой **четвёртую** таблицу:
   ```
   https://docs.google.com/spreadsheets/d/1yj3eWqTpjxZFU0e9yg5A6TIh79N-s9g1Zmz3U-Q_54E/edit
   ```
2. **«Поделиться»** → вставь **тот же** email → **«Читатель»** → **Готово**.

---

### Шаг 2.10. Обновить страницу дашборда

1. Вернись во вкладку браузера, где открыт дашборд (http://localhost:8501).
2. Нажми клавишу **F5** на клавиатуре или кнопку **«Обновить»** в браузере.
3. Данные должны подгрузиться: появятся таблицы и графики по сотрудникам и проектам за выбранный период. Если данных всё ещё нет — проверь, что файл **service_account.json** лежит именно в папке **c:\project\anchor_checker** и что во всех четырёх таблицах добавлен один и тот же email с правом «Читатель».

---

## Дальше каждый раз, когда нужен дашборд

1. Открой **PowerShell**.
2. Введи: **cd c:\project\anchor_checker** → **Enter**.
3. Введи: **python run_dashboard.py** → **Enter**.
4. Открой в браузере **http://localhost:8501** (или тот порт, что покажет PowerShell).

Пока смотришь дашборд, окно PowerShell **не закрывай**. Когда закончишь — в этом окне нажми **Ctrl+C** (зажать Ctrl и нажать букву C), затем можно закрыть окно.

---

## Если нужно, чтобы дашборд открывали по ссылке любые сотрудники

Тогда его нужно один раз выложить в интернет (например, на Streamlit Cloud). Подробная инструкция — в файле **ДАШБОРД_ДЛЯ_ВСЕХ.md** в этой же папке docs.
